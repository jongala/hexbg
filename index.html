<html>
<head>
    <title>Hexagons</title>
    <style type="text/css">
        #example,
        #example canvas {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
        }

        #example {}

        .controls {
            position: relative;
            z-index: 1;
        }
    </style>
</head>
<body>
    <div id="example"></div>
    <div class="controls">
        <button onclick="hexBg(document.getElementById('example'), {scale: 96, pointR: 0.07,  layout: 'overlap', fillOpacity: 0, pointColor:seeded, pointOpacity: 1, strokeOpacity: 1, strokeColor: seeded})">Seeded overlap</button>
        <button onclick="hexBg(document.getElementById('example'), {scale: 96, pointR: 0.07,  layout: 'overlap', clear: false, fillOpacity: 0.1, pointOpacity: 0.2})">Overlap Overlay</button>
        <button onclick="hexBg(document.getElementById('example'), {scale: 96, pointR: 0.07,  layout: 'grid', fillOpacity: 0.5, pointColor:'#ffffff', pointOpacity: 0.5, strokeOpacity: 0.2, strokeColor: '#ffffff'})">Grid</button>
        <button onclick="hexBg(document.getElementById('example'), {scale: 48, pointR: 0.07,  layout: 'overlap', fillOpacity: 0.5, pointColor:'#ffffff', pointOpacity: 0.2, pointR: 0.15,  strokeOpacity: 0.2, strokeColor: '#ffffff'})">Overlap</button>
        <button onclick="hexBg(document.getElementById('example'), {scale: 48, layout: 'tile', fillColor: blendPlane, pointColor:'#ffffff', pointOpacity: 0.5, strokeOpacity: 0.1, strokeColor: '#ffffff'})">Tiled</button>
        |
        <button onclick="hexBg(document.getElementById('example'), {scale: 96, pointR: 0.07,  layout: 'grid', fillOpacity: 0.5, pointColor:'#ffffff', pointOpacity: 0.5, strokeOpacity: 0.2, strokeColor: '#ffffff', renderer:'svg'})">Grid SVG</button>
        <button onclick="hexBg(document.getElementById('example'), {scale: 48, pointR: 0.07,  layout: 'overlap', fillOpacity: 0.5, pointColor:'#ffffff', pointOpacity: 0.2, pointR: 0.15,  strokeOpacity: 0.2, strokeColor: '#ffffff', renderer:'svg'})">Overlap SVG</button>
        <button onclick="hexBg(document.getElementById('example'), {scale: 48, layout: 'tile', fillColor: blendPlane, pointColor:'#ffffff', pointOpacity: 0.5, strokeOpacity: 0.1, strokeColor: '#ffffff', renderer:'svg'})">Tiled SVG</button>
    </div>
    <script src="js/hexbg.js"></script>
    <script src="3p/DAT.GUI.min.js"></script>
    <script type="text/javascript">
        blendPlane = function(p, row, col, x, y, w, h){
            var vals = [
                Math.floor(255 * (w - x)/w),
                0,
                Math.floor(190 * (h - y)/h)
            ];
            return 'rgb(' + vals.join(',') + ')';
        }
        function stepChars(a, s, i) {
            if (s[i] < a.length) {
                return a[s[i]];
            } else {
                return stepChars(a, s, i + 1);
            }
        }
        seeded = function(p, row, col, x, y, w, h) {
            var seed = Math.tan((row + col) + 0.2).toString().replace(/^-?\d\./,'');
            return stepChars(p, seed, 0);
        }
        var visualOpts = {
            renderer: 'canvas',
            layout: 'overlap',
            scale: 96,
            pointR: 0.07,
            fillOpacity: 0.5,
            strokeOpacity: 0.5,
            pointOpacity: 1,
            strokeColor: '#fff',
            pointColor: '#fff',
            palette: ['#3399cc', '#774aa4', '#ff0099', '#ffcc00'],
            clear: true
        };
        var o = visualOpts;


        var exampleNode = document.getElementById('example');
        function renderVisualOpts() {
            hexBg(exampleNode, visualOpts);
        }
        var r = renderVisualOpts;


        window.addEventListener('load', function(e){
            var gui = new DAT.GUI();

            gui.add(o, 'renderer').options('canvas', 'svg')
                .onChange(r);

            // Basics
            gui.add(o, 'layout').options('overlap', 'grid', 'tiled')
                    .onChange(r);
            gui.add(o, 'scale').min(24).max(256).step(1)
                .onChange(r);

            // Fills
            gui.add(o, 'fillOpacity').min(0).max(1).step(0.1)
                .onChange(r);

            // Edges
            gui.add(o, 'strokeOpacity').min(0).max(1).step(0.1)
                .onChange(r);
            gui.add(o, 'strokeColor', '#ffffff')
                .onChange(r);

            // Center Circles
            gui.add(o, 'pointOpacity').min(0).max(1).step(0.1)
                .onChange(r);
            gui.add(o, 'pointR').min(0).max(1)
                .onChange(r);
            gui.add(o, 'pointColor', '#ffffff')
                .onChange(r);

            gui.open(); // resizes the controls
            r(); // draws initial values
        })

    </script>
</body>
</html>